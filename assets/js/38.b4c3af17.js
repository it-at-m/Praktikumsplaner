(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{334:function(e,t,a){"use strict";a.r(t);var n=a(4),i=Object(n.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"database-migration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#database-migration"}},[e._v("#")]),e._v(" Database Migration")]),e._v(" "),t("p",[e._v("Our database migrations are handled by Flyway.\nThis way, we can version our DDL files.\nThey are automatically applied when the backend starts, and there are new, not yet applied, migrations.")]),e._v(" "),t("p",[e._v("For this to work, if you have to make changes to the database, you have to create a new SQL script in the migration folder.\nThe migrations folder is located in the backend "),t("code",[e._v("src/main/resources/db/migration")]),e._v(".\nThe scripts name has to follow this convention: "),t("code",[e._v("V<version_number>__<description_split_with_underscores>")]),e._v(".\nThe "),t("code",[e._v("<version_number>")]),e._v(" should be the next available number, so if there is a "),t("code",[e._v("V10__desc.sql")]),e._v(" then the next script should be named "),t("code",[e._v("V11__desc.sql")]),e._v(".\nThe version number has to be unique, so if there are several people developing and need to add SQL scripts, then they have to communicate which version numbers they are using.\nAs this is not guaranteed, you have to be especially careful when reviewing and merging PRs with changes to the migration files.\nYou can see that there is a naming conflict when the file is not "),t("code",[e._v("added")]),e._v(" but "),t("code",[e._v("modified")]),e._v(" according to the PR.")]),e._v(" "),t("p",[e._v("SQL migration scripts can NOT be modified after they have been applied to the database. If you find an error later, then you have to write a new migration to correct the old one.")]),e._v(" "),t("p",[e._v("Our database is a PostgreSQL database, so we use the PostgreSQL dialect in the SQL scripts.")])])}),[],!1,null,null,null);t.default=i.exports}}]);